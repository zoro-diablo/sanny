'use client';
import styles from './page.module.css';
import { useRef, useEffect } from 'react';
import { ScrollTrigger } from 'gsap/ScrollTrigger';
import gsap from 'gsap';

const phrase =
  'Enhance your workflows to maximize performance and take effective control of your time. Focus on what truly matters to your business, while routine tasks run on autopilot with the help of our no-code and code-based solutions.';

export default function Toad() {
  let refs = useRef([]);
  const body = useRef(null);
  const container = useRef(null);

  useEffect(() => {
    gsap.registerPlugin(ScrollTrigger);
    createAnimation();

    window.addEventListener('resize', () => ScrollTrigger.refresh());
    return () => window.removeEventListener('resize', () => ScrollTrigger.refresh());
  }, []);

  const createAnimation = () => {
    gsap.set(refs.current, { opacity: 0.2 });

    const getEndValue = () => {
      const vh = window.innerHeight;
      return window.innerWidth <= 768 ? `+=${vh / 3}` : `+=${vh / 2}`;
    };

    gsap.to(refs.current, {
      scrollTrigger: {
        trigger: container.current,
        scrub: true,
        start: 'top top',
        end: getEndValue(),
      },
      opacity: 1,
      ease: 'none',
      stagger: window.innerWidth <= 768 ? 0.05 : 0.1,
    });
  };

  const splitWords = (phrase) => {
    let body = [];
    phrase.split(' ').forEach((word, i) => {
      const letters = splitLetters(word);
      body.push(<p key={word + '_' + i}>{letters}</p>);
    });
    return body;
  };

  const splitLetters = (word) => {
    let letters = [];
    word.split('').forEach((letter, i) => {
      letters.push(
        <span
          key={letter + '_' + i}
          ref={(el) => {
            refs.current.push(el);
          }}
        >
          {letter}
        </span>
      );
    });
    return letters;
  };

  return (
    <main ref={container} className={styles.main}>
      <div ref={body} className={styles.body}>
        {splitWords(phrase)}
      </div>
      <div className="flex flex-col gap-y-4 ">
        <p className="text-white/50">Trusted by high-performing companies</p>
        <div className="flex gap-5 gap-x-10 flex-wrap">
          <div>
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="50"
              height="50"
              viewBox="0 0 50 50"
              style={{ fill: '#FFFFFF' }}
            >
              <path d="M46.707,12.293l-8-8c-0.391-0.391-1.023-0.391-1.414,0L25,16.586L12.707,4.293c-0.391-0.391-1.023-0.391-1.414,0l-8,8 C3.105,12.48,3,12.735,3,13v23c0,0.265,0.105,0.52,0.293,0.707l10,10c0.286,0.287,0.718,0.372,1.09,0.217 C14.757,46.769,15,46.404,15,46V25.414l9.293,9.293C24.488,34.902,24.744,35,25,35s0.512-0.098,0.707-0.293L35,25.414V46 c0,0.404,0.243,0.769,0.617,0.924C35.741,46.975,35.871,47,36,47c0.26,0,0.516-0.102,0.707-0.293l10-10 C46.895,36.52,47,36.265,47,36V13C47,12.735,46.895,12.48,46.707,12.293z" />
            </svg>
          </div>
          <div>
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="50"
              height="50"
              viewBox="0,0,256,256"
              style={{ fill: '#FFFFFF' }}
            >
              <g
                fill="#ffffff"
                fillRule="nonzero"
                stroke="none"
                strokeWidth="1"
                strokeLinecap="butt"
                strokeLinejoin="miter"
                strokeMiterlimit="10"
                strokeDasharray=""
                strokeDashoffset="0"
                fontFamily="none"
                fontWeight="none"
                fontSize="none"
                textAnchor="none"
              >
                <g transform="scale(5.12,5.12)">
                  <path d="M25,1.98438l-17,3.1875v13.18359c0,0.77344 0.15625,19.09766 16.46484,29.48828l0.53516,0.34375l0.53906,-0.34375c16.27344,-10.44141 16.46094,-28.71875 16.46094,-29.49219v-13.17969zM25,4.01563l15,2.8125v1.96875l-15,-2.8125l-15,2.8125v-1.96875zM25,8.01563l15,2.8125v2.44922c-4.80859,-1.63672 -9.84375,-2.47656 -15,-2.47656c-6.70703,0 -11.91016,1.35938 -15,2.44531v-2.41797zM25,12.80078c5.16406,0 10.20703,0.86719 15,2.58594v2.96484c0,0.71875 -0.17578,17.54688 -15,27.45703c-14.85547,-9.86328 -15,-26.73047 -15,-27.45703v-2.98047c2.82031,-1.05859 8.0625,-2.57031 15,-2.57031zM25.5,16.09766c-0.19922,0.20313 -0.40234,0.5 -0.40234,1c-1.19922,0 -1.29687,0.70313 -1.59766,0.90234c-1.5,0.60156 -1.69922,0.19922 -2.09766,0.59766c-0.20312,0.20313 -0.30469,0.40234 -0.30469,0.60156c-0.09766,0.5 0.10156,0.89844 0.70313,0.89844c0.19922,0 0.59766,-0.29687 0.89844,-0.29687c0.5,0 1,0.5 1.80078,0.5c0.30078,0 0.59766,-0.19922 1.09766,-1c-0.19922,1.10156 -0.5,1.5 -1.39844,1.5c-0.10156,0.69922 -0.80078,3.19922 -1.5,3.79688c-1.19922,0.90234 -1.80078,1.10156 -2.5,1.20313c-0.10156,0.10156 -0.79687,0 -0.89844,0.29688c-0.10156,0.30078 -0.10156,0.50391 0,0.90234c0,0.39844 0.19922,1.09766 0.5,2.09766c0,0.20313 0.19922,0.40234 0.29688,0.40234c0.20313,0.10156 0.20313,0.19922 0.20313,0.19922c0.10156,1 0.60156,1.5 0.60156,1.5c0,0 0.99609,-1.19922 0.79688,-1.60156c-0.10156,-0.19922 -0.69922,-0.39844 -0.69922,-0.39844v-0.39844c-0.10156,-0.19922 -0.60156,-1.60156 -0.5,-1.60156h1.69922c0,0 1.10156,1.90234 3.20313,3.20313c0.29688,-0.30078 0.79688,-0.80469 1.59766,-0.70312c-2,0.19922 -2,2.40234 -1.5,3.30078c0.69922,1.39844 0.69922,1.69922 0.59766,2c-0.5,0.80078 -0.59766,0.89844 -0.79687,1.19922c-0.10156,0.19922 0.09766,0.30078 -0.10156,0.39844c-1,0.5 -1.19922,1.30469 -1.19922,1.30469c0,0 1.69922,0.19922 2,-0.10156c0.10156,-0.10156 0.09766,-0.60156 0.09766,-0.60156c0,0 0.40234,0.10156 0.5,0.10156c0.10156,-0.10156 0.30469,-0.10156 0.30469,-0.20312c0,-0.09766 0.19531,-0.49609 0.19531,-0.59766c0.10156,-0.39844 0.60156,-1.30078 0.90234,-1.5c0,-0.10156 -0.5,-0.69922 -0.5,-1c-0.10156,-1.30078 1,-1.19922 2.40234,-2.90234c0.09766,-0.19922 0.29688,-0.09766 0.39844,-0.09766c2.60156,0 2.30078,-2.10156 2.69922,-4.40234c-0.80078,0.90234 -0.80078,0.40234 -0.80078,0.40234c-0.10156,-0.89844 0.60156,-2.40234 0.60156,-2.40234c0,0 -1,0.60156 -1.10156,1.40234c-0.39844,-0.80078 0.30078,-2 0.30078,-2c-0.39844,0.19922 -0.90234,0.60156 -0.90234,2c0,3.60156 -0.09766,3.39844 -0.39844,4c-0.10156,0.10156 -0.39844,0.10156 -0.29687,-0.19922c-0.10156,-0.39844 0.09766,-1.30078 -2.30469,-2.70312c-1.09766,-0.69922 -1.69922,-1.79687 -1.5,-2.29687c0.30078,0.30078 1.00391,0.29688 1.40234,0.29688c-0.30078,-0.19922 -1,-0.69922 -1.19922,-1c0.30078,0.20313 1.60156,0.50391 2,0.30469c-0.69922,-0.30078 -1.60156,-1.00391 -1.80078,-1.40234c0.19922,0.19922 1.30078,0.39844 1.80078,0.19922c-0.5,-0.19922 -1.30078,-0.59766 -1.5,-1.19922c0.39844,0.10156 0.69922,0.19922 1.69922,0c-0.80078,-0.30078 -1.39844,-0.90234 -1.69922,-1.30078c0.30078,0 1.30078,0.10156 1.69922,0.39844c-0.19922,-0.59766 -1.10156,-1.09766 -1.80078,-1.59766c0.19922,0 1,0.10156 1.39844,0c-0.39844,-0.39844 -1.29687,-0.80078 -1.39844,-1c0.30078,0 0.69922,-0.19922 0.89844,-0.40234c-1.29687,0 -1.5,-1 -2,-1c-0.19922,-0.09766 -0.49609,-0.79687 -0.59766,-1zM20.69922,21.30078c-0.19922,0 -2.19922,1.79688 -2.19922,1.89844c-0.10156,0.19922 -0.09766,0.30078 -0.09766,0.30078c-1,0.30078 -1.30469,0.90234 -1.30469,0.90234c0,0 1.30078,0.79688 1.60156,0.5c0.19922,-0.20312 0.30078,-0.80469 0.30078,-0.80469c0,0 0.30078,0.00391 0.40234,-0.09766l0.29688,-0.30078c0.30078,-0.30078 0.89844,-0.79687 0.89844,-0.79687c0.20313,0.19922 0.80078,1 1.10156,1.39844c0.19922,-0.10156 0.69922,-0.5 1,-1.10156c-0.69922,-0.80078 -1.5,-1.89844 -2,-1.89844zM24.09766,30.09766c-0.09766,1.60156 0.10156,2.80078 -0.09766,2.90234c-0.89844,0.30078 -1.40234,-0.10156 -1.80078,0c-0.19922,0.10156 -0.09766,0.30078 -0.29687,0.19922c-1.10156,-0.19922 -1.70312,0.39844 -1.70312,0.39844c0,0 1.20313,1.40234 1.60156,1.30469c0.10156,0 0.5,-0.40234 0.5,-0.40234c0,0 0.09766,0.39844 0.29688,0.5c0.10156,0 0.30078,0.10156 0.40234,0c0.10156,-0.10156 0.39844,-0.30078 0.5,-0.30078c0.30078,-0.19922 1.40234,-0.39844 1.80078,-0.39844c0.10156,-0.19922 0.19922,-0.40234 0.10156,-0.60156c0,0 -1,-1 -0.5,-2.89844c-0.10156,-0.10156 -0.70312,-0.60156 -0.80469,-0.70312z" />
                </g>
              </g>
            </svg>
          </div>
          <div>
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="50"
              height="50"
              viewBox="0 0 32 32"
              style={{ fill: '#FFFFFF' }}
            >
              <path d="M 22.050781 9.9492188 C 21.525781 9.9242187 21.099609 10 21.099609 10 L 25.099609 16 L 21.099609 21.900391 C 21.099609 21.900391 22.899219 22.200391 23.699219 21.400391 C 24.199219 20.900391 24.499219 20.4 26.199219 18 C 26.499219 17.5 26.800781 18 26.800781 18 C 28.300781 20 28.700391 20.800391 29.400391 21.400391 C 30.300391 22.100391 32 21.900391 32 21.900391 L 28 16 L 31.900391 10 C 31.900391 10 30.200391 9.7 29.400391 10.5 C 28.800391 11.1 28.200781 11.9 26.800781 14 C 26.800781 14 26.499219 14.5 26.199219 14 C 24.799219 12 24.199609 11.1 23.599609 10.5 C 23.199609 10.1 22.575781 9.9742188 22.050781 9.9492188 z M 0.41992188 9.9902344 C 0.27851562 9.9835938 0.1375 9.9875 0 10 L 3.1992188 22 C 3.1992187 22 4.1992187 22.000781 4.6992188 21.800781 C 5.3992187 21.500781 5.6996094 21.199609 6.0996094 19.599609 C 6.4996094 18.199609 7.4996094 13.899609 7.5996094 13.599609 C 7.7996094 12.899609 8.1007813 12.899609 8.3007812 13.599609 C 8.4007812 13.899609 9.4007812 18.099609 9.8007812 19.599609 C 10.200781 21.199609 10.499219 21.500781 11.199219 21.800781 C 11.799219 22.100781 12.800781 22 12.800781 22 L 16 10 C 14.9 9.9 13.6 10.499219 13.5 11.699219 L 11.800781 18.099609 L 10.400391 12.900391 C 10.100391 11.400391 9.3996094 10.599609 8.0996094 10.599609 C 6.7996094 10.599609 6.2007813 11.300391 5.8007812 12.900391 L 4.4003906 18.099609 L 2.6992188 11.699219 C 2.4367187 10.561719 1.4097656 10.036719 0.41992188 9.9902344 z M 19.599609 10 C 19.599609 10 18.800781 9.9992188 18.300781 10.199219 C 17.700781 10.499219 17.5 11.099609 17.5 12.599609 C 17.5 12.599609 17.800781 12.299609 18.300781 12.099609 C 19.700781 11.599609 19.599609 10.6 19.599609 10 z M 19.5 12 L 19.5 12.076172 C 19.524326 12.032657 19.530125 12 19.5 12 z M 19.5 12.076172 C 19.443576 12.177106 19.249766 12.36025 18.900391 12.5 C 18.600391 12.7 18.3 12.800391 18 12.900391 C 17.3 13.200391 17.400391 13.599609 17.400391 14.599609 L 17.400391 22 C 17.400391 22 18.199219 22.100781 18.699219 21.800781 C 19.399219 21.500781 19.5 21.099609 19.5 19.599609 L 19.5 12.076172 z" />
            </svg>
          </div>
          <div>
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="50"
              height="50"
              viewBox="0,0,256,256"
              style={{ fill: '#FFFFFF' }}
            >
              <g
                fill="#ffffff"
                fillRule="nonzero"
                stroke="none"
                strokeWidth="1"
                strokeLinecap="butt"
                strokeLinejoin="miter"
                strokeMiterlimit="10"
                strokeDasharray=""
                strokeDashoffset="0"
                fontFamily="none"
                fontWeight="none"
                fontSize="none"
                textAnchor="none"
              >
                <g transform="scale(8,8)">
                  <path d="M16,3c-7.172,0 -13,5.828 -13,13c0,7.172 5.828,13 13,13c7.172,0 13,-5.828 13,-13c0,-7.172 -5.828,-13 -13,-13zM16,5.16797c2.82516,0 5.38208,1.07886 7.30664,2.83789c-0.04131,-0.00084 -0.083,-0.01172 -0.13477,-0.01172c-1.062,0 -1.75391,0.93073 -1.75391,1.92773c0,0.899 0.45286,1.64788 1.00586,2.54688c0.411,0.715 0.88867,1.64652 0.88867,2.97852c0,0.932 -0.34722,2.00376 -0.82422,3.50977l-1.07031,3.60742l-4.06641,-12.52734c0.65,-0.033 1.23438,-0.09766 1.23438,-0.09766c0.585,-0.065 0.52055,-0.93144 -0.06445,-0.89844c0,0 -1.75458,0.14063 -2.89258,0.14063c-1.061,0 -2.84961,-0.14062 -2.84961,-0.14062c-0.585,-0.033 -0.64945,0.86644 -0.06445,0.89844c0,0 0.55172,0.06466 1.13672,0.09766l1.82422,5.50781l-2.36328,7.10742l-4.09766,-12.61328c0.661,-0.033 1.24609,-0.09766 1.24609,-0.09766c0.585,-0.065 0.50955,-0.93144 -0.06445,-0.89844c0,0 -1.68178,0.13344 -2.82031,0.13867c1.98276,-2.44989 5.01195,-4.01367 8.42383,-4.01367zM25.51172,10.80078c0.84155,1.54194 1.32031,3.31191 1.32031,5.19922c0,4.28946 -2.47332,7.96928 -6.07227,9.72656c0.23349,-0.11521 0.46558,-0.23056 0.68945,-0.36719l3.30469,-9.56445c0.617,-1.538 0.82227,-2.77391 0.82227,-3.87891c0,-0.401 -0.0205,-0.75947 -0.0625,-1.10547c-0.00153,-0.00295 -0.00063,-0.00676 -0.00195,-0.00977zM6.20313,11.38477l5.0625,14.35547c-3.613,-1.7522 -6.09766,-5.44049 -6.09766,-9.74023c0,-1.65517 0.37713,-3.21493 1.03516,-4.61523zM16.18359,16.94336l3.33789,9.13086c0.02141,0.05254 0.04273,0.09677 0.07422,0.13867c-1.12576,0.39419 -2.33194,0.61914 -3.5957,0.61914c-1.06689,0 -2.09408,-0.15863 -3.06641,-0.44336zM11.39648,25.80273c0.28143,0.1288 0.56576,0.24547 0.85352,0.35547c-0.29084,-0.10684 -0.57515,-0.22507 -0.85352,-0.35547zM20.41602,25.89258c-0.22846,0.10167 -0.46264,0.19132 -0.69922,0.27734c0.23747,-0.08277 0.47047,-0.17634 0.69922,-0.27734zM12.56055,26.27148c0.11574,0.03824 0.23082,0.07645 0.34961,0.11133c-0.11781,-0.03478 -0.23354,-0.0727 -0.34961,-0.11133z" />
                </g>
              </g>
            </svg>
          </div>
        </div>
      </div>
    </main>
  );
}